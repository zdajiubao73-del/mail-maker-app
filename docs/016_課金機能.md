# 016: 課金機能

## Phase
Phase 1 - MVP

## 概要
Apple In-App Purchase と RevenueCat を使ったフリーミアムモデルの課金機能を実装する。

## プラン比較

| 項目 | 無料プラン | 有料プラン |
|------|-----------|-----------|
| メール生成回数 | 1日5回 | 無制限 |
| トーン選択 | 基本（丁寧・カジュアル） | 全種類 |
| テンプレート | 基本のみ | 全テンプレート |
| メール履歴 | 直近10件 | 無制限 |
| 履歴学習 | なし | あり（Phase 3） |
| メール直接送信 | なし（メールアプリ連携のみ） | あり |
| 広告 | あり | なし |

## TODO

### RevenueCat導入
- [ ] RevenueCatアカウント作成・プロジェクト設定
- [ ] App Store Connect でIn-App Purchase商品の登録
  - [ ] 月額プラン（¥480〜¥980/月）
  - [ ] 年額プラン（¥3,800〜¥7,800/年）
- [ ] RevenueCat SDK のインストール・初期化
- [ ] App Store Connect との連携設定

### 課金フロー実装
- [ ] 課金プラン画面のUI実装（無料/有料の比較表）
- [ ] 購入ボタン → Apple In-App Purchase → RevenueCat
- [ ] レシート検証
- [ ] 購入完了後のプラン状態更新
- [ ] 購入復元（Restore Purchases）機能
- [ ] 解約・プラン変更への対応

### プラン判定ロジック
- [ ] ユーザーのプラン状態を判定するロジック実装
- [ ] 機能制限の適用
  - [ ] メール生成回数（1日5回 / 無制限）
  - [ ] トーン選択の制限
  - [ ] テンプレート表示の制限
  - [ ] メール履歴の表示件数制限
  - [ ] メール直接送信の可否
- [ ] 制限到達時のアップグレード訴求UI

### 広告
- [ ] 広告SDKの導入（AdMob等）
- [ ] 無料プランでの広告表示
- [ ] 有料プランでの広告非表示

## 完了条件
- RevenueCatが正しく設定されている
- 月額/年額プランの購入フローが動作する
- プランに応じた機能制限が正しく適用される
- 購入復元が動作する
- 無料プランで広告が表示される
