# 015: Gmail連携

## Phase
Phase 1 - MVP

## 概要
Google OAuth 2.0 による認証とGmail APIを使ったメール送信機能を実装する。

## 認証フロー
1. ユーザーが「メールアカウントを連携する」をタップ
2. Googleログイン画面が表示される
3. ユーザーがログインし、メール送信権限を許可
4. アプリがアクセストークンを取得
5. トークンを暗号化して安全に保存

## TODO

### OAuth認証
- [ ] Google Cloud Console でOAuthクライアントの作成
- [ ] expo-auth-session / expo-web-browser を使ったOAuth認証フローの実装
- [ ] アクセストークン・リフレッシュトークンの取得
- [ ] トークンの暗号化保存（expo-secure-store）
- [ ] トークンのリフレッシュ処理
- [ ] 認証状態の管理（認証済み / 未認証 / 期限切れ）

### メール送信
- [ ] バックエンドにGmail送信エンドポイントの実装
  - [ ] POST /send — トークン + 宛先 + 件名 + 本文
  - [ ] Gmail API を使ったメール送信処理
  - [ ] MIME形式のメール構築
- [ ] 送信エラーハンドリング（認証切れ、レート制限、宛先不正等）

### アカウント管理
- [ ] 複数Gmailアカウントの登録対応
- [ ] アカウント一覧表示（認証状態付き）
- [ ] アカウント削除（トークン破棄）
- [ ] メール作成時の送信元アカウント選択UI

## 完了条件
- Google OAuth認証が動作し、トークンが取得・保存される
- Gmail API経由でメールが送信される
- 複数アカウントの管理ができる
- 認証切れ時にリフレッシュが動作する
